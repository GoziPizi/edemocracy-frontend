<div id="page-container">
    <div id="header">
        <h1>Débat</h1>
    </div>

    <div class="separation-line"></div>

    <div id="presentation">
        <div id="debate-presentation">
            <h3>{{debate.title}}</h3>
            <p>Contexte: <br> <br> {{debate.description}}</p>
        </div>
    </div>

    <div class="separation-line"></div>

    <app-argument-debate-presentation #argumentDebatePresentation></app-argument-debate-presentation>

    <div class="separation-line" *ngIf="debate.argumentId !== null"></div>

    <div id="arguments-container">
        <div id="recent-arguments">
            <h4>Arguments Récents:</h4>
            <swiper-container 
                *ngIf="recentArguments.length > 0"
                navigation="true" 
                dir="rtl"
                >
                <swiper-slide *ngFor="let argument of recentArguments">
                    <app-single-argument-presentation 
                        class="single-argument-presentation" 
                        [argument]="argument"
                        [$voteSubject]="voteSubject$"></app-single-argument-presentation>
                </swiper-slide>
            </swiper-container>
            <p *ngIf="recentArguments.length === 0">Aucun argument récent</p>
        </div>
        <div id="popular-arguments">
            <h4>Arguments Populaires:</h4>
            <swiper-container 
                *ngIf="popularArguments.length > 0"
                #swiperContainer
                navigation="true"
                centeredSlides="true"
                [slidesPerView]=2 >
                <swiper-slide *ngFor="let argument of popularArguments">
                    <app-single-argument-presentation 
                        class="single-argument-presentation" 
                        [argument]="argument"
                        [$voteSubject]="voteSubject$"></app-single-argument-presentation>
                </swiper-slide>
            </swiper-container>
            <p *ngIf="popularArguments.length === 0">Aucun argument populaire</p>
        </div>
    </div>
    <div id=add-argument>
        <button (click)="togglePopUp()"><i class="fa-regular fa-comment-dots"></i>Ajouter un argument</button>
    </div>
    <div id="sorted-arguments">
        <h4>Arguments pour: </h4>
        <app-arguments-displayer class="sorted-arguments-displayer" #argumentsFor></app-arguments-displayer>
        <h4>Arguments contre: </h4>
        <app-arguments-displayer #argumentsAgainst></app-arguments-displayer>
        <h4>Solutions: </h4>
        <app-arguments-displayer #argumentsSolution></app-arguments-displayer>
    </div>
    <div id="for-against">
        <div id="nb-of-votes">
            <p>{{debate.debateResult.nbVotes}} votants</p>
            <p>{{debate.debateContributorsResult.nbVotes}} contributeurs votants</p>
        </div>
        <h4>Votez pour ou contre cette idée:</h4>
        <div id="vote-selector">
            <p 
                *ngFor="let value of voteValues" 
                class="vote-button" 
                (click)="voteForDebate(value)" 
                [ngClass]="{'selected' : isCurrentValue(value), 'green' : true, 'red' : isNegative(value) }">{{mapperEnumToString(value)}}</p>
        </div>
        <p>Vote complet:</p>
        <app-for-against-debate #debateResult ></app-for-against-debate>
        <p>Vote des contributeurs uniquement:</p>
        <app-for-against-debate #debateContributorsResult ></app-for-against-debate>
    </div>
</div>

<div id="argument-pop-up" *ngIf="isPopUpOpen">
    <div id="pop-up-content">
        <i class="fas fa-times" (click)="togglePopUp()"></i>
        <h3>Ajouter un argument</h3>
        <input type="text" placeholder="Titre de l'argument" [(ngModel)]="argumentTitle">
        <div id="type-container">
            <label for="for">Pour</label>
            <input type="radio" id="for" name="argumentType" value="FOR" [(ngModel)]="argumentType">
            <label for="against">Contre</label>
            <input type="radio" id="against" name="argumentType" value="AGAINST" [(ngModel)]="argumentType">
            <label for="solution">Solution</label>
            <input type="radio" id="solution" name="argumentType" value="SOLUTION" [(ngModel)]="argumentType">
        </div>
        <p class="validate-button" (click)="onValidate()" >Valider</p>
    </div>
</div>
